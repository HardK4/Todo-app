<html>
    <head>

    </head>
    <body>
        <h1>TODO APP</h1>
        <p>todo app test project</p>
        <input type="text",id="Input", placeholder="Элемент списка">
        <button>Submit</button><button id="clear">Clear</button>
        <br><p1><span 
            id="display">0</span></p1>
        <ul>
        </ul>
        <script>
                const baseURL = 'http://localhost:3000/get_habits';
                fetch(baseURL)
                    .then(resp => resp.json())
                    .then(data => displayData(data));

                function displayData(data) {
                    console.log(JSON.stringify(data, null, 2));
                    ul.innerHTML += JSON.stringify(data, null, 2)
                    for (let i = 0; i<data.length; i++){
                        console.log(data[i]['habitname'])
                        ul.innerHTML += "<li onclick='onClickListItem(this)'>" + data[i]['habitname'] + "</li>"
                    }
                    }   
                function onClickListItem(element) {
                console.log(element)
                element.style.color = "red"
                console.log(213)
            }
            let btn = document.querySelector('button')
            let input = document.querySelector('input')
            let ul = document.querySelector('ul')
            let p1 = document.querySelector('p1')
            let disp = document.getElementById("display")
            let clear = document.getElementById("clear")
            let count = 0
            btn.setAttribute('disabled', true)
            input.oninput = () => {
            if (input.value.length < 1) {
                    btn.setAttribute('disabled', true)
                }else {btn.removeAttribute('disabled')}
            }
            btn.onclick =  () => {
                fetch("http://localhost:3000/create_habits", {method: "POST", body: JSON.stringify({"habitname": input.value, "habit": 4}), headers: {
      'Content-Type': 'application/json'
      // 'Content-Type': 'application/x-www-form-urlencoded',
    },})
                ul.innerHTML += "<li onclick='onClickListItem(this)'>" + input.value + "</li>"  
                count++
                disp.innerHTML = count
                } 
            disp.onclick = () => {
                count--
                disp.innerHTML = count
            }
            clear.onclick = () => {
                let clear = document.getElementById("clear");
        if (input.value !="") {
            input.value = "";
            }
        }
            
        </script>
    </body>
</html>